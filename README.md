# audio_guru
Audio device test utilities

## Installation

To install the required dependencies, run:

```bash
pip install -r requirements.txt
```

## Scripts

### analyze.py
Analyzes audio files matching a specified pattern. It provides detailed statistics and can display signal components and noise floor information.

**Usage:**
```bash
python analyze.py [options] <pattern>
```

**Options:**
- `-a`, `--audio-stats`: Show audio statistics (default: enabled).
- `-c`, `--components [N]`: Show top N frequency components (default: 10).
- `-csv`, `--write-csv <file>`: Write statistics to a CSV file.
- `-d`, `--device`: Use input from default audio device instead of files.
- `-l`, `--max-length <secs>`: Maximum analysis length in seconds (default: 60.0).
- `-p`, `--play <pattern>`: Play files matching the pattern.
- `-q`, `--quiet`: Minimize output.
- `-s`, `--specs`: Show unit specifications.
- `-v`, `--verbose`: Enable verbose output.

**Sorting Options:**
- `-t`: Sort by THD (default).
- `-tf`: Sort by frequency.
- `-tf2`: Sort by secondary frequency.
- `-tn`: Sort by name.
- `-ts`: Sort by SNR.
- `-tt`: Sort by start time.

### generate.py
Generates a set of example audio files (sine waves, noise, sweeps, distortion tests, etc.) in the `examples/` directory.

**Usage:**
```bash
python generate.py
```

### join.py
Joins multiple audio files into a single continuous file. You can specify a duration of silence to insert between each file.

**Usage:**
```bash
python join.py -w <output_file> [-s <silence_seconds>] <input_files>
```

**Options:**
- `-w`, `--write <file>`: Output filename (required).
- `-s`, `--silence <secs>`: Seconds of silence to insert between files.

### play.py
Plays audio files matching a pattern. Useful for quick verification.

**Usage:**
```bash
python play.py [options] <pattern>
```
**Options:**
- `-l`, `--max-length`: Maximum play time per file in seconds (default: 15.0).
- `-q`, `--quiet`: Minimize output.

### split.py
Splits audio files into separate segments (typically based on silence) and saves them as individual files.

**Usage:**
```bash
python split.py [options] <pattern>
```

**Options:**
- `pattern`: File pattern to match (e.g., `*.wav`). Use quotes if pattern contains wildcards.

## Signals and Examples

### Signals (`signals/`)
The `signals/` directory contains the raw test signals generated by `generate.py`. These are the core building blocks for testing.

- **Content**: Tones, sweeps, noise, and IMD test signals.
- **Tools**:
    - `Create-Iso.ps1`: PowerShell script to create a data CD ISO relative to the signals.
    - `Create-Playlist.ps1`: PowerShell script to generate `signals.wpl` for Windows Media Player.

### Examples (`examples/`)
The `examples/` directory contains demonstration files or specific scenario setups.

See [examples/README.md](examples/README.md) for more details.

## File Naming Conventions

The project uses consistent naming conventions for audio files, particularly in the `examples/` and `samples/` directories, to identify the source, signal type, and parameters.

### Signals (`signals/`)
Files in the `signals/` directory (generated by `generate.py`) follow the pattern:
`[NN-]test_<type>_<frequency>[_<extra>].wav`

- **Prefix**: `test_` indicates a raw test signal. Numbered prefixes (e.g., `01-`) may be added for sorting.
- **Type**: `tone`, `noise`, `sweep`, `silence`, etc.
- **Frequency**: e.g., `1k`, `20k`.

**Examples:**
- `01-test_tone_20.wav`: 20 Hz sine wave.
- `test_sweep.wav`: Frequency sweep.

### Examples (`examples/`)
Files in `examples/` often depict specific scenarios and use the `example_` prefix:
`example_<scenario>...`

**Examples:**
- `example_filt-noise.wav`: Filtered noise example.

### Device Samples (`samples/`)
Recordings from devices often follow the pattern:
`<Device>_<SignalType>_<Frequency>.wav` or `<Source>_to_<Destination>_<Signal>.wav`

- **Device**: Name of the device under test (e.g., `Denon_DVD-1720`, `Yamaha_CDC-645`).
- **Signal/Frequency**: `1k`, `sweep`, `19k_20k`, etc.
- **Signal Chain**: Indicates connections (e.g., `Sony_VPP_to_xfi`).

**Examples:**
- `Denon_DCD-700_1k.wav`: 1 kHz tone played by a Denon DCD-700.
- `Sony_VPP_to_xfi_1kHz.wav`: 1 kHz tone from Sony VPP captured by X-Fi.
